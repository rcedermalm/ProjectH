<head>
  <script src="Script/typeahead.js"></script>
  <script src="Script/bootstrap-tagsinput.js"></script>
  <script src="Script/upload.js"></script> 
 </head>
<h1 id="heading-browse">Add files to the database</h1>



<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <button class="btn-sm upload-btn pull-left" type="button">
          <span class="glyphicon glyphicon-upload" id="select-files-icon"></span>Select files</button>
        </div>  
        <div class="panel-body">
          <!--
          <div class="progress">
           <div class="progress-bar" role="progressbar"></div>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <input id="upload-input" type="file" name="uploads[]" multiple="multiple"></br>

Select files 
<div class="fileinput fileinput-new" data-provides="fileinput">
  <input type="file" class="btn btn-default btn-browse" id="files" name="files[]" multiple />
  <output id="list"></output>
</div> -->


<!-- User input -->
<div ng-controller="AddController">

  <form ng-submit="processForm()">
    <div>
      <label for="directory" class="txt-info">Folder directory:</label>
      <input type="text" class="txt-field" ng-model="inputDirectory" id="directory-init" required>
      {{content}}
    </div>
    <div >
      <label for="types" class="txt-info">Data Types:</label>
      <input type="text" class="txt-field" ng-model="inputTags" id="labels-init">
    </div>

    <div>
      <!-- old id: creator -->
      <label for="creator" class="txt-info">Creator:</label>
        <input type="text" ng-model="Info.Creator" class="txt-field" id="creator-init">
    </div>

    <div>
      <!-- old id: infoTestData -->
      <label for="infoTestData" class="txt-info">TestData ID:</label>
      <input type="text" ng-model="Info.TestDataID" class="txt-field" id="TDID-init">
    </div>

    <div>
      <!-- old id: infoTestCase -->
      <label for="infoTestCase" class="txt-info">TestCase ID:</label>
      <input type="text" ng-model="Info.TestCaseID"  class="txt-field" id="TCID-init">
    </div>

    <div>
      <!-- old id: patient-name -->
      <label for="patient-name" class="txt-info">New patient name:</label>
      <input type="text" ng-model="Info.NewPatientName" class="txt-field" id="patient-name-init">
    </div>

    <div>
      <!-- old id: tags -->
      <label for="tags" class="txt-info">Labels:</label>
      <input type="text" id="tags" value="" data-role="tagsinput" id="tags-init" class="form-control" ng-model="Tags" ng-init="Tags=''">
    </div>

    <div>
      <!-- old id: comments -->
      <label for="comments" class="txt-info">Comments:</label>
      <textarea type="text" class="txt-area" id="comments-init" ng-model="Info.Comments" placeholder="Info"></textarea>
    </div>

    <div>
      <label for="anonymized" class="txt-info">Anonymized?</label>
      <label class="switch">
        <input type="checkbox" ng-model="Info.Anonymized" ng-init="Info.Anonymized='false'" id = "anonymized-init">
        <div class="slider"></div>
      </label>
    </div>


    <!-- Custom Fields -->

    <form class="form-inline input-append" role="form">
    <div>
      <label class="txt-info">Custom fields:</label>
      <div class="custom-fields">
        <div class="controls" id="profs">
          <div class="float-field">
            <input class="input1 txt-field" id="field1" name="prof2" type="text" placeholder="Key" data-items="8" />
            <input class="input2 txt-field" id="field2" name="prof1" type="text" placeholder="Value" data-items="8" />
            <button class="remove btn-danger" type="button">
              X
            </button>
          </div>
        </div>
      </div>
    </div>
      <button id="b1" class="btn add-more btn-import" type="button">Add Custom Field</button>
      
    </form>




    <div class="buttons">
      <button type="button" class="btn btn-cancel">Cancel</button>
      <!--<button type="submit" class="btn btn-import">Add entry</button>  
      <button ng-click="SendData()" type="submit" class="btn btn-import">Add entry</button> -->   
      <button class="btn btn-import" data-toggle="modal" data-target="#register" onclick="modalFunction()">Proceed</button>
    </div>
  </form>


  <script>

    $(".custom-fields:first").hide(); //hide template

      /* Add new item based on hidden template */
      $(".add-more").click(function() {
        var newItem = $(".custom-fields:first").clone();
        newItem.find("input1").attr("id", "field" + ($(".custom-fields").length + 2)); //rewrite id's to avoid duplicates
        newItem.find("input2").attr("id", "field" + ($(".custom-fields").length + 2)); //rewrite id's to avoid duplicates
        newItem.show(); //show clone of template
        $(".custom-fields:last").after(newItem);
        bindRemove();
      });

      /* Bind remove function to last added button*/
      function bindRemove() {
        $(".remove:last").click(function(e) {
          if ($(".remove").length > 1)
            $(this).parents(".custom-fields").remove();
        });
      }

      /* Execute bind-function at startup */
      bindRemove();

  </script>



  <!-- Modal -->
  <div class="modal fade" id="register" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Overview</h4>
        </div>
        <div class="modal-body">

          <div>
            <label for="directory" class="txt-info">Folder directory:</label>
            <input id="directory" name="directory" type="text" value="{{ request.form.directory }}" disabled/>
          </div>

          <div >
            <label for="types" class="txt-info">Data Types:</label>
            <input id="labels" name="labels" type="text" value="{{ request.form.labels }}" disabled/>
          </div>

          <div>
            <label for="creator" class="txt-info">Creator:</label>
            <input id="creator" name="creator" type="text" value="{{ request.form.creator }}" disabled/>
          </div>

          <div>
            <label for="infoTestData" class="txt-info">TestData ID:</label>
            <input id="TDID" name="TDID" type="text" value="{{ request.form.TDID }}" disabled/>
          </div>

          <div>
            <label for="infoTestCase" class="txt-info">TestCase ID:</label>
            <input id="TCID" name="TCID" type="text" value="{{ request.form.TCID }}" disabled/>
          </div>

          <div>
            <label for="patient-name" class="txt-info">New patient name:</label>
            <input id="patient-name" name="patient-name" type="text" value="{{ request.form.patient-name }}" disabled/>
          </div>

         <!-- <div>
            <label for="tags" class="txt-info">Labels:</label>
            <input id="tags" name="tags" type="text" value="{{ request.form.tags }}" disabled/>
          </div> -->

          <div>
            <label for="comments" class="txt-info">Comments:</label>
            <input id="comments" name="comments" type="text" value="{{ request.form.comments }}" disabled/>
          </div>

          <!-- <div>
            <label for="anonymized" class="txt-info">Anonymized:</label>
            <input id="anonymized" name="anonymized" type="text" value="{{ request.form.anonymized }}" disabled/>
          </div> -->

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-cancel" data-dismiss="modal">Close</button>
          <button ng-click="SendData()" type="submit" class="btn btn-import">Add entry</button> 
        </div>
      </div>
    </div>
  </div>
</div>
